#!/bin/env bash

#
# Changes my stuff to light/dark mode. Of course only works at my own desktop!
#
# Change the following variable to set where it should look for suckless
# sources:
SOURCEDIR="$HOME/src"

if [ "$(readlink ~/.config/gtk-2.0/gtkrc-2.0)" = "dark" ]; then
    CHANGETO=light
else
    CHANGETO=dark
fi

cd $SOURCEDIR/dwm
ln -sf "$CHANGETO.h" colors.h
make -B

cd $SOURCEDIR/dmenu
ln -sf "$CHANGETO.h" colors.h
make -B

cd $SOURCEDIR/st
ln -sf "$CHANGETO.h" colors.h
make -B

cd $HOME/.config/gtk-2.0
ln -sf "$CHANGETO" gtkrc-2.0

cd $HOME/.config/gtk-3.0
ln -sf "$CHANGETO.ini" settings.ini

cd $HOME/.config/Kvantum
ln -sf "$CHANGETO.kvconfig" kvantum.kvconfig

# the gtk4 theme must be set "manually"
GTK4_CONFIG="$HOME/.config/gtk-4.0"
if [ "$CHANGETO" = "dark" ]; then
    THEME="/usr/share/themes/Catppuccin-Mocha-Standard-Pink-Dark/gtk-4.0"
else
    THEME="/usr/share/themes/Catppuccin-Latte-Standard-Pink-Light/gtk-4.0"
fi
rm "$GTK4_CONFIG/assets"
rm "$GTK4_CONFIG/gtk.css"
rm "$GTK4_CONFIG/gtk-dark.css"
ln -sf "$THEME/assets" "$GTK4_CONFIG/assets"
ln -sf "$THEME/gtk.css" "$GTK4_CONFIG/gtk.css"
ln -sf "$THEME/gtk-dark.css" "$GTK4_CONFIG/gtk-dark.css"

# only works because I have dwm running in a loop
killall dwm
